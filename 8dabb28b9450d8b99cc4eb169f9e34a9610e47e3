{
  "comments": [
    {
      "key": {
        "uuid": "612f116f_d2f208c4",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 522,
      "author": {
        "id": 1076971
      },
      "writtenOn": "2020-01-22T00:24:39Z",
      "side": 1,
      "message": "Will this work on a sparse image?",
      "range": {
        "startLine": 522,
        "startChar": 9,
        "endLine": 522,
        "endChar": 18
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7142b653_64e2d617",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 522,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-01-22T00:34:48Z",
      "side": 1,
      "message": "No it doesn\u0027t. I guess the image should be mounted on the device. Do we have a use case for the sparse images?",
      "parentUuid": "612f116f_d2f208c4",
      "range": {
        "startLine": 522,
        "startChar": 9,
        "endLine": 522,
        "endChar": 18
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c577dd0a_d4653b41",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 522,
      "author": {
        "id": 1076971
      },
      "writtenOn": "2020-01-22T00:48:09Z",
      "side": 1,
      "message": "Well, sparse images are supported by the Android build system so I had to make avbtool understand the image format (see ImageHandler in avbtool for how it works). So... if this code ever runs outside Android for example in a build system setup you\u0027d need to support Android sparse images. On the other hand, if this code only runs inside Android you don\u0027t need it.",
      "parentUuid": "7142b653_64e2d617",
      "range": {
        "startLine": 522,
        "startChar": 9,
        "endLine": 522,
        "endChar": 18
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6609e622_78e15069",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 522,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-01-22T05:02:58Z",
      "side": 1,
      "message": "added a TODO",
      "parentUuid": "c577dd0a_d4653b41",
      "range": {
        "startLine": 522,
        "startChar": 9,
        "endLine": 522,
        "endChar": 18
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "934c5d5c_92cec13d",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 544,
      "author": {
        "id": 1076971
      },
      "writtenOn": "2020-01-22T00:24:39Z",
      "side": 1,
      "message": "Seems like the caller is already doing this.",
      "range": {
        "startLine": 544,
        "startChar": 4,
        "endLine": 544,
        "endChar": 49
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "73a93a07_20f1a6c6",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 544,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-01-22T00:34:48Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "934c5d5c_92cec13d",
      "range": {
        "startLine": 544,
        "startChar": 4,
        "endLine": 544,
        "endChar": 49
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14f3ad2b_75224098",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 544,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-01-22T05:02:20Z",
      "side": 1,
      "message": "I try to say AvbHashDescriptor, make the comment cleaner.",
      "parentUuid": "73a93a07_20f1a6c6",
      "range": {
        "startLine": 544,
        "startChar": 4,
        "endLine": 544,
        "endChar": 49
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6f21a751_be409ee4",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 603,
      "author": {
        "id": 1076971
      },
      "writtenOn": "2020-01-22T00:24:39Z",
      "side": 1,
      "message": "I don\u0027t understand the comment... is there a hash for the ECC data? If so, why is it important to point out it\u0027s not in the hashtree descriptor. As for the way to verify if the ECC in the image is correct, I guess you would need to calculate it and see if it\u0027s the same as is in the file...\n\n(Also, typo: eec -\u003e ecc?)",
      "range": {
        "startLine": 602,
        "startChar": 0,
        "endLine": 603,
        "endChar": 51
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "84d09d4c_3ccbf295",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 603,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-01-22T00:34:48Z",
      "side": 1,
      "message": "It\u0027s a particular problem because we seem to truncate the fec footer (including the magic and hash) in the avbtool. And I don\u0027t find the hash available elsewhere.. https://cs.corp.google.com/aosp-master/external/avb/avbtool?l\u003d3875\n\nCould it be better if we adds it back...",
      "parentUuid": "6f21a751_be409ee4",
      "range": {
        "startLine": 602,
        "startChar": 0,
        "endLine": 603,
        "endChar": 51
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88df1adc_d0917878",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 603,
      "author": {
        "id": 1076971
      },
      "writtenOn": "2020-01-22T00:48:09Z",
      "side": 1,
      "message": "Why do you need the hash? And what it is a hash over? If it\u0027s just a hash over the ECC data you can just compute it here...\n\nThe reason the hash isn\u0027t in the AVB data is because it\u0027s not needed at runtime to correct errors.",
      "parentUuid": "84d09d4c_3ccbf295",
      "range": {
        "startLine": 602,
        "startChar": 0,
        "endLine": 603,
        "endChar": 51
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0dc886a9_44c086e9",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 603,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-01-22T05:02:20Z",
      "side": 1,
      "message": "Right, I want to check if the hash of the ecc data is the same as the stored value. If I compute the hash of the ecc here, there isn\u0027t a stored value to compare against. Because the hashtree doesn\u0027t include the ecc data.\n\nOn the other hand, the hash of ecc is computed and compared against the one in the verity footer (for VB1.0) in line 188. At any rate, I rewrite the comment.",
      "parentUuid": "88df1adc_d0917878",
      "range": {
        "startLine": 602,
        "startChar": 0,
        "endLine": 603,
        "endChar": 51
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b5fca72c_c1e8d3b6",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 701,
      "author": {
        "id": 1076971
      },
      "writtenOn": "2020-01-22T00:24:39Z",
      "side": 1,
      "message": "I think this would be easier... you\u0027re already implementing parts of what avb_slot_verify() is already doing.",
      "range": {
        "startLine": 701,
        "startChar": 14,
        "endLine": 701,
        "endChar": 44
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13a9d1de_29c229bb",
        "filename": "libfec/fec_open.cpp",
        "patchSetId": 13
      },
      "lineNbr": 701,
      "author": {
        "id": 1088085
      },
      "writtenOn": "2020-01-22T00:34:48Z",
      "side": 1,
      "message": "Right, I had a WIP cl on top of this one. Though libavb_user only has a device version. And I haven\u0027t thought clearly how to sort out the code, and make fec work on host. The last resort is to implement my own AvbOps (though I don\u0027t want to do that..)",
      "parentUuid": "b5fca72c_c1e8d3b6",
      "range": {
        "startLine": 701,
        "startChar": 14,
        "endLine": 701,
        "endChar": 44
      },
      "revId": "8dabb28b9450d8b99cc4eb169f9e34a9610e47e3",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    }
  ]
}