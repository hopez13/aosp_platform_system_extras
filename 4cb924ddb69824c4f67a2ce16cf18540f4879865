{
  "comments": [
    {
      "key": {
        "uuid": "9a620dda_13a48bdb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2019-02-21T19:00:55Z",
      "side": 1,
      "message": "It\u0027s a pity atest doesn\u0027t work:\n\n$ atest simpleperf_unit_test\n/.../\nRUNNER ERROR: simpleperf_unit_test did not report any run:\nsimpleperf_unit_test E 02-21 18:50:26  4629  4629 gtest_main.cpp:103] testdata wasn\u0027t found. Use \"/data/local/tmp/simpleperf_unit_test -t \u003ctestdata_dir\u003e\"\n\nMaybe consider adding an AndroidTests.xml that puts the testdata dir in place?",
      "range": {
        "startLine": 12,
        "startChar": 5,
        "endLine": 14,
        "endChar": 76
      },
      "revId": "4cb924ddb69824c4f67a2ce16cf18540f4879865",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "66b4868a_f9a0a473",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2019-02-21T19:00:55Z",
      "side": 1,
      "message": "Note I couldn\u0027t get the 32 bit unit test to work:\n\nCANNOT LINK EXECUTABLE \"/data/nativetest/simpleperf_unit_test/arm/simpleperf_unit_test\": library \"libLLVM_android.so\" not found\n\nlibLLVM_android.so is in out/target/.../system/lib but it doesn\u0027t appear in /system/lib on the device (lib64 works fine). That\u0027s odd, so I\u0027ll follow up on it. However, it\u0027s not a regression in this CL.",
      "range": {
        "startLine": 14,
        "startChar": 2,
        "endLine": 14,
        "endChar": 76
      },
      "revId": "4cb924ddb69824c4f67a2ce16cf18540f4879865",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5a1815a4_0e0a065d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2019-02-21T19:28:02Z",
      "side": 1,
      "message": "there is already a AndroidTests.xml in simpleperf dir, and I can run atest simpleperf_unit_test successfully. Don\u0027t know why the difference.",
      "parentUuid": "9a620dda_13a48bdb",
      "range": {
        "startLine": 12,
        "startChar": 5,
        "endLine": 14,
        "endChar": 76
      },
      "revId": "4cb924ddb69824c4f67a2ce16cf18540f4879865",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3618d72b_cb46247e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2019-02-21T19:28:02Z",
      "side": 1,
      "message": "I guess only 64bit libLLVM_android.so is needed on device. I prefer to switch to static llvm libs for simpleperf_unit_test.",
      "parentUuid": "66b4868a_f9a0a473",
      "range": {
        "startLine": 14,
        "startChar": 2,
        "endLine": 14,
        "endChar": 76
      },
      "revId": "4cb924ddb69824c4f67a2ce16cf18540f4879865",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "7d621c33_593b2d35",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2019-02-21T23:07:55Z",
      "side": 1,
      "message": "I see. Shouldn\u0027t the build rules just build one with like that then? I get a dynamic dependency when just plainly building it:\n\n$ m installclean \u0026\u0026 m simpleperf_unit_test\n$ objdump -x out/target/product/taimen/data/nativetest/simpleperf_unit_test/simpleperf_unit_test | grep LLVM\n  NEEDED               libLLVM_android.so\n\nAlso, if the library isn\u0027t a thing on 32 bit I\u0027d expect Soong to complain on that dependency.\n\nLooks like the build rules could use some fixing here, but I\u0027m not enough of a Soong expert to right away spot what\u0027s wrong in them.",
      "parentUuid": "3618d72b_cb46247e",
      "range": {
        "startLine": 14,
        "startChar": 2,
        "endLine": 14,
        "endChar": 76
      },
      "revId": "4cb924ddb69824c4f67a2ce16cf18540f4879865",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e2cbee47_19843636",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1373864
      },
      "writtenOn": "2019-02-21T23:07:55Z",
      "side": 1,
      "message": "\u003e there is already a AndroidTests.xml in simpleperf dir\n\nSo there is, sorry. I played around a bit with it and that error went away without me really changing anything. Weird. Now it runs but I get errors in the cpu_offline test, however that\u0027s also the case on a clean tree.",
      "parentUuid": "5a1815a4_0e0a065d",
      "range": {
        "startLine": 12,
        "startChar": 5,
        "endLine": 14,
        "endChar": 76
      },
      "revId": "4cb924ddb69824c4f67a2ce16cf18540f4879865",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0d70ae06_0237617d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 2
      },
      "lineNbr": 14,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2019-02-21T23:33:55Z",
      "side": 1,
      "message": "the libLLVM_android.so for 32bit is built, but not shipped on device. And the test runs on device. I switched the test from static llvm libs to shared llvm lib recently, but didn\u0027t test the 32bit version. So switch the test back to static llvm libs will fix the problem. Anyway, it isn\u0027t related to this CL.",
      "parentUuid": "7d621c33_593b2d35",
      "range": {
        "startLine": 14,
        "startChar": 2,
        "endLine": 14,
        "endChar": 76
      },
      "revId": "4cb924ddb69824c4f67a2ce16cf18540f4879865",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}