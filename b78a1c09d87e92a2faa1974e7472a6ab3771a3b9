{
  "comments": [
    {
      "key": {
        "uuid": "88583ce8_0752aea6",
        "filename": "perfprofd/perf_data_converter.cc",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2018-03-22T23:16:39Z",
      "side": 1,
      "message": "Here we have two problems:\n1. Since we are recording system wide, we get mmaps from many processes. We need to ensure a sample only uses the mmaps for its process.\n2. The mmaps for one process can be changed overtime. So two samples recorded at different time may use different mmaps. To support this, we need to use a structure to trace the mmap change, and process mmap and sample records in order. So each sample can see all mmap changes before it, and never see mmap changes after it.\n\nMy recommendation is to use quipper::PerfParser.parsed_events(). ParsedEvent has DSO + offset for each sample. And you can check if a DSO has build_id. Maybe you can reuse the parser created in quipper::SerializeFromFileWithOptions.",
      "range": {
        "startLine": 68,
        "startChar": 52,
        "endLine": 68,
        "endChar": 54
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "1d8cddf5_01c4b295",
        "filename": "perfprofd/perf_data_converter.cc",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-03-22T23:42:47Z",
      "side": 1,
      "message": "Your points are valid.\n\nI\u0027m trying to avoid having to look at the PerfParser again, like the original code did. It\u0027s not that hard to track the mmap-events, but I guess it\u0027s overhead.",
      "parentUuid": "88583ce8_0752aea6",
      "range": {
        "startLine": 68,
        "startChar": 52,
        "endLine": 68,
        "endChar": 54
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "c7454d40_0d6854cb",
        "filename": "perfprofd/perf_data_converter.cc",
        "patchSetId": 3
      },
      "lineNbr": 68,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-03-27T19:02:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1d8cddf5_01c4b295",
      "range": {
        "startLine": 68,
        "startChar": 52,
        "endLine": 68,
        "endChar": 54
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "23c97a94_ad9be5bc",
        "filename": "perfprofd/perf_data_converter.cc",
        "patchSetId": 3
      },
      "lineNbr": 134,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2018-03-22T23:16:39Z",
      "side": 1,
      "message": "So the reason of using RangeMap is to find the start_addr and size of a symbol, right?\nWhy not let Symbolizer pass it through the Decode() interface?",
      "range": {
        "startLine": 134,
        "startChar": 98,
        "endLine": 134,
        "endChar": 99
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d82ee0ce_10bc0b3c",
        "filename": "perfprofd/perf_data_converter.cc",
        "patchSetId": 3
      },
      "lineNbr": 134,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-03-22T23:42:47Z",
      "side": 1,
      "message": "That isn\u0027t correct separation of concerns. The symbolizer\u0027s job is to give symbols, not record (and optimize) the final seen-symbols table. I prefer the range map here.",
      "parentUuid": "23c97a94_ad9be5bc",
      "range": {
        "startLine": 134,
        "startChar": 98,
        "endLine": 134,
        "endChar": 99
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7c1c6596_38563cbf",
        "filename": "perfprofd/perf_data_converter.cc",
        "patchSetId": 3
      },
      "lineNbr": 134,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-03-27T19:02:10Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "d82ee0ce_10bc0b3c",
      "range": {
        "startLine": 134,
        "startChar": 98,
        "endLine": 134,
        "endChar": 99
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b7bc8330_35cf3ef9",
        "filename": "perfprofd/perfprofd_record.proto",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2018-03-22T23:16:39Z",
      "side": 1,
      "message": "Add comment, like symbol info of a shared library without build id?",
      "range": {
        "startLine": 11,
        "startChar": 21,
        "endLine": 11,
        "endChar": 22
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "bc23aa50_baa817a5",
        "filename": "perfprofd/perfprofd_record.proto",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-03-27T19:02:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b7bc8330_35cf3ef9",
      "range": {
        "startLine": 11,
        "startChar": 21,
        "endLine": 11,
        "endChar": 22
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "287830a1_c66008c1",
        "filename": "perfprofd/perfprofd_record.proto",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1056364
      },
      "writtenOn": "2018-03-22T23:16:39Z",
      "side": 1,
      "message": "Since already in Symbol message, change to name and name_md5_prefix?",
      "range": {
        "startLine": 13,
        "startChar": 22,
        "endLine": 13,
        "endChar": 33
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "be000563_582ba380",
        "filename": "perfprofd/perfprofd_record.proto",
        "patchSetId": 3
      },
      "lineNbr": 13,
      "author": {
        "id": 1041833
      },
      "writtenOn": "2018-03-27T19:02:10Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "287830a1_c66008c1",
      "range": {
        "startLine": 13,
        "startChar": 22,
        "endLine": 13,
        "endChar": 33
      },
      "revId": "b78a1c09d87e92a2faa1974e7472a6ab3771a3b9",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}